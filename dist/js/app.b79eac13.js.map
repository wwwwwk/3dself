{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils/coord.ts","webpack:///./src/utils/basethree.ts","webpack:///./src/assets/earth/earth.jpg","webpack:///./src/assets/toolbar/rotates.png","webpack:///./src/components/Layout/ToolBar/main.ts","webpack:///./src/assets/toolbar/heatmap.png","webpack:///./src/App.vue?2535","webpack:///./src/assets/toolbar/rotate.png","webpack:///./src/assets/toolbar/homes.png","webpack:///./src/router/index.ts","webpack:///./src/assets/toolbar/init.png","webpack:///./src/components/Earth/flyline.ts","webpack:///./src/App.vue?1615","webpack:///./src/components/Layout/ToolBar/reactattr.ts","webpack:///./src/components/Layout/Popup/popupatte.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?8ecf","webpack:///./src/main.ts","webpack:///./src/assets/toolbar/inits.png","webpack:///./src/assets/toolbar/heatmaps.png","webpack:///./src/components/Earth/glrender.ts","webpack:///./src/api/earth.ts","webpack:///./src/components/Earth/heatmap.ts","webpack:///./src/components/Earth/featurepoint.ts","webpack:///./src/assets/toolbar/home.png","webpack:///./src/assets/earth/earth_bump.jpg","webpack:///./src/assets/earth/earth_spec.jpg"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","DEG2RAD","Math","PI","angleToRad","angle","lonlatToSphere","lon","lat","radius","phi","theta","x","sin","cos","z","y","lonlatToFlat","lonlatToMocart","log","tan","BaseThree","domContainer","this","scene","renderer","antialias","setPixelRatio","devicePixelRatio","setSize","offsetWidth","offsetHeight","domElement","aspect","camera","orbitControl","oldZoom","zoom","innerWidth","innerHeight","rayCaster","offset","getBoundingClientRect","mouseVector","requestAnimateId","round","distanceTo","position","dispose","destroyRotate","callback","addEventListener","removeEventListener","root","children","forEach","item","delChildren","geometry","material","localX","left","localY","top","set","setFromCamera","intersectObject","action","requestAnimationFrame","rotateY","rotateZ","cancelAnimationFrame","btnData","routeBtn","checkSrc","uncheckSrc","isChecked","rotateBtn","initBtn","heatmapBtn","flyLineBtn","featurePointBtn","distanceBufferBtn","lightMaskBtn","citySpriteBtn","useToolbarState","toolbaData","state","routeControl","rotateControl","initControl","heatmapControl","flyLineControl","featurePointControl","distanceBufferControl","lightMaskControl","citySpriteControl","setToolbarState","payload","toolbarState","subRotateControl","changeRoute","changeHeatmap","changeFlyline","changeFeaturePoint","routes","path","redirect","component","router","history","fs","vs","FlyLine","flyLine","number","count","curves","mainDistance","particles","requestAnimationId","xyCoordFrom","from","xyCoordTo","to","xyCoordMid","fromPoint","midPoint","toPoint","curve","distance","getLength","points","getPoints","inputPoints","color","index","setFromPoints","percents","Float32Array","uniforms","time","speed","size","shaderMaterial","vertexShader","fragmentShader","transparent","particle","canvas","width","height","context","getContext","fillStyle","beginPath","arc","fill","closePath","updateAction","k","animation","startLocation","endLocation","duration","tweenMove","easing","Linear","None","onUpdate","onStop","onComplete","repeat","Infinity","start","animate","update","add","remove","render","_ctx","_cache","$props","$setup","$data","$options","_component_router_view","currentSceneState","setCurrentSceneState","three","currentScene","popupShowState","setPopupShowState","popupShow","setup","__exports__","app","App","use","mount","ambientLight","hemisLight","baseThree","animateFrame","heatmapMesh","featurePoint","heatmapUrl","a","params","where","f","featurePointUrl","outFields","config","minnum","maxnum","heatPluginData","heatData","temp","features","randomNum","random","getData","pointOper","mapColors","point","alpha","globalAlpha","gradient","createRadialGradient","addColorStop","palette","setColorPaint","img","getImageData","imageData","putImageData","paletteCanvas","paletteCtx","gradientConfig","createLinearGradient","parseFloat","fillRect","clearCanvas","setHeatmap","clearRect","earth","featurePoiMesh","xyCoord","getCircleOptions","attributes","resRadius","resOpacity","objectId","circleGeometry","circleMateria","opacity","applyMatrix4","makeTranslation","circleMesh","lookAt","updateMatrix","FATALITIES","EVENT_TYPE","OBJECTID","minDistance","maxDistance","copy","earthPng","bumpPng","specPng","materia","map","load","bumpMap","bumpScale","specularMap","specular","shininess","openHeatmap","0.2","0.3","0.4","0.6","0.8","0.9","1","heatmap","heatmapMateria","refresh","tempMateria","changeZoom","controlChange","closeHeatmap","removeChange","openFlyline","resData","setParticles","addFromScene","moveAction","closeFlyline","destroy","openFeaturePoint","getDatas","res","setPoints","closeFeaturePoint"],"mappings":"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","file":"js/app.b79eac13.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-04a8a2ba\":\"2579ac30\",\"chunk-2f3c2194\":\"2f14cfd1\",\"chunk-689033a7\":\"cbbb6b7f\",\"chunk-6f60c8f1\":\"1644d9f4\",\"chunk-712abd72\":\"ec45aed0\",\"chunk-6ebbcd54\":\"e06de74e\",\"chunk-7604dc92\":\"e6dfe38f\",\"chunk-a39fdcba\":\"ab1fabd2\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-04a8a2ba\":1,\"chunk-689033a7\":1,\"chunk-712abd72\":1,\"chunk-6ebbcd54\":1,\"chunk-7604dc92\":1,\"chunk-a39fdcba\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-04a8a2ba\":\"66535f31\",\"chunk-2f3c2194\":\"31d6cfe0\",\"chunk-689033a7\":\"c2d51661\",\"chunk-6f60c8f1\":\"31d6cfe0\",\"chunk-712abd72\":\"b04a6288\",\"chunk-6ebbcd54\":\"21c5c6e0\",\"chunk-7604dc92\":\"00795589\",\"chunk-a39fdcba\":\"e07f9b26\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import * as THREE from \"three\";\r\n\r\nconst DEG2RAD = Math.PI / 180;\r\nconst RAD2DEG = 180 / Math.PI;\r\n\r\nconst radToAngle = (rad: number) => {\r\n  return rad * RAD2DEG;\r\n};\r\n\r\nconst angleToRad = (angle: number) => {\r\n  return angle * DEG2RAD;\r\n};\r\n\r\nconst lonlatToSphere = (lon: number, lat: number, radius: number) => {\r\n  const phi = angleToRad(90 - lat);\r\n  const theta = angleToRad(180 + lon);\r\n  const x = -(radius * Math.sin(phi) * Math.cos(theta));\r\n  const z = radius * Math.sin(phi) * Math.sin(theta);\r\n  const y = radius * Math.cos(phi);\r\n  return { x, y, z };\r\n};\r\n\r\nconst spherePointDistance = (\r\n  point1: THREE.Vector3,\r\n  point2: THREE.Vector3,\r\n  center: THREE.Vector3,\r\n  radius: number\r\n) => {\r\n  const vector1 = new THREE.Vector3(\r\n    point1.x - center.x,\r\n    point1.y - center.y,\r\n    point1.z - center.z\r\n  );\r\n  const vector2 = new THREE.Vector3(\r\n    point2.x - center.x,\r\n    point2.y - center.y,\r\n    point2.z - center.z\r\n  );\r\n  const dot =\r\n    vector1.x * vector2.x + vector1.y * vector2.y + vector1.z * vector2.z;\r\n  const angle = Math.acos(dot);\r\n\r\n  return 2 * Math.PI * radius * (angle / (2 * Math.PI));\r\n};\r\n\r\n/**\r\n * lon,lat 转至 2048*1024\r\n * @params {number} lon\r\n * @params {number} lat\r\n */\r\nconst lonlatToFlat = (lon: number, lat: number) => {\r\n  const x = ((lon - -180) / 360) * 2048;\r\n  const y = ((90 - lat) / 180) * 1024;\r\n  return { x, y };\r\n};\r\n\r\n/**\r\n * 经纬度转墨卡托\r\n */\r\nconst lonlatToMocart = (lon: number, lat: number) => {\r\n  const x = (lon * 20037508.34) / 180;\r\n  let y = Math.log(Math.tan(((90 + lat) * Math.PI) / 360)) / (Math.PI / 180);\r\n  y = (y * 20037508.34) / 180;\r\n  return { x, y };\r\n};\r\n\r\n/**\r\n * 墨卡托转经纬度\r\n */\r\nconst mocartToLonlat = (x: number, y: number) => {\r\n  const lon = (x / 20037508.34) * 180;\r\n  let lat = (y / 20037508.34) * 180;\r\n  lat =\r\n    (180 / Math.PI) *\r\n    (2 * Math.atan(Math.exp((y * Math.PI) / 180)) - Math.PI / 2);\r\n  return { lon, lat };\r\n};\r\n\r\nexport {\r\n  lonlatToSphere,\r\n  radToAngle,\r\n  angleToRad,\r\n  spherePointDistance,\r\n  lonlatToFlat,\r\n  lonlatToMocart,\r\n  mocartToLonlat,\r\n};\r\n","import * as THREE from \"three\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\n\r\nclass BaseThree {\r\n  scene: THREE.Scene;\r\n  renderer: THREE.WebGLRenderer;\r\n  orbitControl: OrbitControls;\r\n  camera: THREE.PerspectiveCamera;\r\n  oldZoom: number;\r\n  innerWidth: number;\r\n  innerHeight: number;\r\n  offset: DOMRect;\r\n  rayCaster: THREE.Raycaster;\r\n  mouseVector: THREE.Vector2;\r\n  requestAnimateId: number;\r\n  constructor(domContainer: HTMLDivElement) {\r\n    this.scene = new THREE.Scene();\r\n    this.renderer = new THREE.WebGLRenderer({\r\n      antialias: true,\r\n    });\r\n\r\n    this.renderer.setPixelRatio(window.devicePixelRatio);\r\n    this.renderer.setSize(domContainer.offsetWidth, domContainer.offsetHeight);\r\n\r\n    domContainer.appendChild(this.renderer.domElement);\r\n\r\n    const aspect = domContainer.offsetWidth / domContainer.offsetHeight;\r\n    this.camera = new THREE.PerspectiveCamera(45, aspect, 1, 1000);\r\n    this.orbitControl = new OrbitControls(\r\n      this.camera,\r\n      this.renderer.domElement\r\n    );\r\n\r\n    this.oldZoom = this.zoom;\r\n\r\n    this.innerWidth = domContainer.offsetWidth;\r\n    this.innerHeight = domContainer.offsetHeight;\r\n    this.rayCaster = new THREE.Raycaster();\r\n    this.offset = domContainer.getBoundingClientRect();\r\n    this.mouseVector = new THREE.Vector2();\r\n\r\n    this.requestAnimateId = 0;\r\n  }\r\n\r\n  get zoom() {\r\n    return Math.round(\r\n      this.orbitControl.target.distanceTo(this.orbitControl.object.position)\r\n    );\r\n  }\r\n\r\n  destroy() {\r\n    this.orbitControl.dispose();\r\n    this.destroyRotate();\r\n  }\r\n\r\n  controlChange(callback: any) {\r\n    this.orbitControl.addEventListener(\"change\", callback);\r\n  }\r\n\r\n  changeZoom() {\r\n    this.oldZoom = this.zoom;\r\n  }\r\n\r\n  removeChange(callback: any) {\r\n    this.orbitControl.removeEventListener(\"change\", callback);\r\n  }\r\n\r\n  delChildren(root: any) {\r\n    if (Object.prototype.hasOwnProperty.call(root, \"children\")) {\r\n      // console.log('递归删除');\r\n      root.children.forEach((item: any) => {\r\n        this.delChildren(item);\r\n      });\r\n    } else {\r\n      if (Object.prototype.hasOwnProperty.call(root, \"geometry\")) {\r\n        // console.log('删除mesh');\r\n        root.geometry.dispose();\r\n        root.material.dispose();\r\n      } else {\r\n        // console.log('删除mesh之外');\r\n        root.dispose();\r\n      }\r\n    }\r\n  }\r\n\r\n  getIntersects(x: number, y: number, target: any): THREE.Intersection[] {\r\n    const localX = ((x - this.offset.left) / this.innerWidth) * 2 - 1;\r\n    const localY = (-(y - this.offset.top) / this.innerHeight) * 2 + 1;\r\n\r\n    this.mouseVector.set(localX, localY);\r\n\r\n    this.rayCaster.setFromCamera(this.mouseVector, this.camera);\r\n    return this.rayCaster.intersectObject(target, true);\r\n  }\r\n\r\n  startRotate() {\r\n    const action = () => {\r\n      this.requestAnimateId = requestAnimationFrame(action);\r\n      this.scene.rotateY(0.004);\r\n      this.scene.rotateZ(0.002);\r\n    };\r\n    action();\r\n  }\r\n\r\n  destroyRotate() {\r\n    if (this.requestAnimateId) {\r\n      cancelAnimationFrame(this.requestAnimateId);\r\n    }\r\n  }\r\n}\r\n\r\nexport { BaseThree };\r\n","module.exports = __webpack_public_path__ + \"img/earth.7cddb76f.jpg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAWCAMAAAD6gTxzAAAAAXNSR0IArs4c6QAAAO1QTFRFAAAAAAD/AID/QIC/K4DVSW3bM2bMMHDPNmvXPW3bOnTRN2/TOXHZOWzZOHDWN27XNnHYOG/VNnDXN27UNnHVOHDXNm/XOG/VN27VOHDXN27WN27VOHDWOG/XNm/VOHDWN2/WN27WOHDXN2/XN27VNm/WOG/WN27WN2/XOG/XOHDWNm7VOG/WN2/WNm/WN3DVNm7WN2/XNm/XN2/VN3DWN2/WOG/WN2/VN2/WNnDWN2/VN2/WN2/WN3DXN2/VN27WN3DWN2/WNm/WN2/WN27WN2/WN2/WN2/WN2/WNm/WN2/WN2/WN2/WN2/WN2/WQQea5gAAAE50Uk5TAAECBAYHChATFRYXGygyMzQ3OTw9QExOT1JYYWRlZ2lqb3JzdHV3fX6FiY2Oj5aZm563uLm6vL6/wMTLzNDX2eDn6uzw8fP09vj6+/3+GVLzvAAAAL1JREFUGBlVwYciQmEAQOFT6Sohsle27E3IKHvUef/H8XfvVfk+EvmZpdX5EfoKh28G7csyqalnU50asfKnfTWC3JPB49HeRUftTAArBptZYLKlXgE36gGxitopkfnRdpHEtbpASW2S2lfXKKgvpI7VKnypFWK5pjoHt2ojomvXoAjrBvfTGUZPDO6A4Xe7XlvGFgl2HNDIEuQf7PkeJzb24Z8NUrNtE2f0VI2dD9G3bVCPGLSl9Yj/lk8jEr+PTDoR3Pw4dgAAAABJRU5ErkJggg==\"","import { reactive, readonly, inject } from \"vue\";\nimport router from \"@/router/index\";\n\nimport {\n  openHeatmap,\n  closeHeatmap,\n  openFlyline,\n  closeFlyline,\n  openFeaturePoint,\n  closeFeaturePoint,\n} from \"@/components/Earth/glrender\";\n\nconst btnData = reactive({\n  // 通用\n  routeBtn: {\n    name: \"路由\",\n    checkSrc: require(\"@/assets/toolbar/homes.png\"),\n    uncheckSrc: require(\"@/assets/toolbar/home.png\"),\n    isChecked: false,\n  },\n  rotateBtn: {\n    name: \"旋转控制\",\n    checkSrc: require(\"@/assets/toolbar/rotates.png\"),\n    uncheckSrc: require(\"@/assets/toolbar/rotate.png\"),\n    isChecked: true,\n  },\n  initBtn: {\n    name: \"初始位置\",\n    checkSrc: require(\"@/assets/toolbar/inits.png\"),\n    uncheckSrc: require(\"@/assets/toolbar/init.png\"),\n    isChecked: false,\n  },\n  // 地球\n  heatmapBtn: {\n    name: \"热力图\",\n    checkSrc: require(\"@/assets/toolbar/heatmaps.png\"),\n    uncheckSrc: require(\"@/assets/toolbar/heatmap.png\"),\n    isChecked: false,\n  },\n  flyLineBtn: {\n    name: \"飞线图\",\n    checkSrc: require(\"@/assets/toolbar/heatmaps.png\"),\n    uncheckSrc: require(\"@/assets/toolbar/heatmap.png\"),\n    isChecked: false,\n  },\n  featurePointBtn: {\n    name: \"特征点图\",\n    checkSrc: require(\"@/assets/toolbar/heatmaps.png\"),\n    uncheckSrc: require(\"@/assets/toolbar/heatmap.png\"),\n    isChecked: false,\n  },\n  // 城市\n  distanceBufferBtn: {\n    name: \"缓冲区图\",\n    checkSrc: require(\"@/assets/toolbar/heatmaps.png\"),\n    uncheckSrc: require(\"@/assets/toolbar/heatmap.png\"),\n    isChecked: false,\n  },\n  lightMaskBtn: {\n    name: \"光罩图\",\n    checkSrc: require(\"@/assets/toolbar/heatmaps.png\"),\n    uncheckSrc: require(\"@/assets/toolbar/heatmap.png\"),\n    isChecked: false,\n  },\n  citySpriteBtn: {\n    name: \"poi点\",\n    checkSrc: require(\"@/assets/toolbar/heatmaps.png\"),\n    uncheckSrc: require(\"@/assets/toolbar/heatmap.png\"),\n    isChecked: false,\n  },\n});\n\nconst useToolbarState = () => {\n  // btnState\n  const toolbaData = reactive({\n    state: {\n      routeControl: false,\n      rotateControl: false,\n      initControl: false,\n      heatmapControl: false,\n      flyLineControl: false,\n      featurePointControl: false,\n      distanceBufferControl: false,\n      lightMaskControl: false,\n      citySpriteControl: false,\n    },\n  });\n\n  const setToolbarState = (payload: any) => {\n    toolbaData.state = payload;\n  };\n\n  return { setToolbarState, toolbarState: readonly(toolbaData) };\n};\n\nconst subRotateControl = () => {\n  btnData.rotateBtn.isChecked = !btnData.rotateBtn.isChecked;\n};\n\nconst changeRoute = () => {\n  router.push(\"/\");\n};\n\nconst changeHeatmap = async () => {\n  btnData.heatmapBtn.isChecked = !btnData.heatmapBtn.isChecked;\n\n  if (btnData.heatmapBtn.isChecked) {\n    await openHeatmap();\n  } else {\n    closeHeatmap();\n  }\n};\n\nconst changeFlyline = async () => {\n  btnData.flyLineBtn.isChecked = !btnData.flyLineBtn.isChecked;\n\n  if (btnData.flyLineBtn.isChecked) {\n    await openFlyline();\n  } else {\n    closeFlyline();\n  }\n};\n\nconst changeFeaturePoint = async () => {\n  btnData.featurePointBtn.isChecked = !btnData.featurePointBtn.isChecked;\n\n  if (btnData.featurePointBtn.isChecked) {\n    await openFeaturePoint();\n  } else {\n    closeFeaturePoint();\n  }\n};\n\nexport {\n  btnData,\n  useToolbarState,\n  subRotateControl,\n  changeRoute,\n  changeHeatmap,\n  changeFlyline,\n  changeFeaturePoint,\n};\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAMAAAAMs7fIAAAAAXNSR0IArs4c6QAAAJlQTFRFAAAAAAAAqqrVs7Pmv8zytsLntsXpuMTrtsPruMPttsPst8PruMPst8PqtsPruMLrtsLqtsLst8PqtsLrt8Prt8Lqt8TstsLqt8Pqt8LrtsLqtsPqt8PrtsLrtsPrtsLrt8LqtsPqt8LrtsLqtsPqt8PrtsPrtsLrt8PrtsLrtsPrtsPrt8Prt8Lqt8LrtsPrtsLrt8Prt8Pr+g8ukwAAADJ0Uk5TAAEGChQVI0FNb3d/hIeJj5OTlJacn5+rrbG5uru9wMHGx83S09Th4+3v7/Hx8/P5/P6pnTvTAAAAl0lEQVQY00XQ2RaCMAxF0Thbi0wiOKOg2NZSIP//cdoi5D7uh7NWAhKxgGFPxAoQ0eyHGURlRTCvTViIERNWCiMO83ILy/cG1rXUOUDKRpArHvxqqUcwyZy0BLvOSUJQxk4YwaLvhATTixMkODZOIoKr33cIZrZT1qIe4SQ/d3uX5FkX83Pjc/m/VAfDtJVKqdv4n4dSry8G+Bc+lo42/QAAAABJRU5ErkJggg==\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=3000013a&lang=css\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAWCAMAAAD6gTxzAAAAAXNSR0IArs4c6QAAAO1QTFRFAAAA////gP//v7//qtX/trbbs8zmr7/vvMnytsLnucXovMjps8bsucbsuMLrucPrtcTrtcPst8Xtt8PquMTqt8PrucPrt8TruMLst8Tst8LruMPquMLrtsLrt8TrtsLst8PsuMPqt8PruMPrtsTrt8LrtsPsuMTrtsLrtsTstsPrt8Prt8TruMLruMTrt8Prt8TrtsPst8Prt8Pst8LqtsPqt8Prt8Prt8Prt8Prt8Prt8Prt8Prt8Prt8Prt8Prt8Prt8Prt8Prt8Lqt8Prt8Prt8Prt8Prt8Prt8Prt8Prt8Prt8Prt8Prt8PrTCNX8wAAAE50Uk5TAAECBAYHChATFRYXGygyMzQ3OTw9QExOT1JYYWRlZ2lqb3JzdHV3fX6FiY2Oj5aZm563uLm6vL6/wMTLzNDX2eDn6uzw8fP09vj6+/3+GVLzvAAAAL1JREFUGBlVwYciQmEAQOFT6Sohsle27E3IKHvUef/H8XfvVfk+EvmZpdX5EfoKh28G7csyqalnU50asfKnfTWC3JPB49HeRUftTAArBptZYLKlXgE36gGxitopkfnRdpHEtbpASW2S2lfXKKgvpI7VKnypFWK5pjoHt2ojomvXoAjrBvfTGUZPDO6A4Xe7XlvGFgl2HNDIEuQf7PkeJzb24Z8NUrNtE2f0VI2dD9G3bVCPGLSl9Yj/lk8jEr+PTDoR3Pw4dgAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAMAAABVlYYBAAAAAXNSR0IArs4c6QAAAIFQTFRFAAAAQIC/M2bMQGDfQGrVMHDPPGnSM3DWN23RM27UNXHaOXHVNG/YOWzZOXHVOHDYOHDXOHHWN27WNm7VOG/VN27WN2/WNm/WN3DWOG/WN2/XN2/WNnDWN27WN2/WOG/WN2/WN2/XN2/WNm/WN2/WN2/WN2/WN2/WN2/WN2/WN2/WHufs9wAAACp0Uk5TAAQFCAwQERkcHiIkJyg2O0BEXWiTlJWWoq6xtMDCyNPe4+Tq7e/2+vz+8Wx+pAAAAI1JREFUGBltwYkWgUAABdCH9qFdQvuq9/8fqBxTKfdiccIf3svDXsoUOy5JF1sJyQQbLicuVjTbzznJfVvD5HDNGq412e0IpeZWrQCXir+qC0ai4lol8CEKLgqBL6Ol1BqYlZRKzFQuVEgOFw6kgKPu3nEUQArJPtKhRz0ZQnoMsYWJFQ9PSOYZkjAxegOdzB0wKdalBgAAAABJRU5ErkJggg==\"","import { createRouter, createWebHashHistory } from \"vue-router\";\r\n\r\nconst routes = [\r\n  {\r\n    path: \"/\",\r\n    redirect: \"/home\",\r\n    component: () => import('@/components/Layout/ToolBar/index.vue'),\r\n    children: [\r\n      {\r\n        path: \"home\",\r\n        name: \"Home\",\r\n        component: () => import(\"@/views/home.vue\"),\r\n      },\r\n      {\r\n        path: \"earth\",\r\n        name: \"Earth\",\r\n        component: () => import(\"@/views/earth.vue\"),\r\n      },\r\n      {\r\n        path: \"room\",\r\n        name: \"Room\",\r\n        component: () => import(\"@/views/room.vue\"),\r\n      },\r\n      {\r\n        path: \"city\",\r\n        name: \"City\",\r\n        component: () => import(\"@/views/city.vue\"),\r\n      },\r\n      {\r\n        path: \"building\",\r\n        name: \"Building\",\r\n        component: () => import(\"@/views/building.vue\"),\r\n      },\r\n    ]\r\n  },\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory(),\r\n  routes,\r\n});\r\n\r\nexport default router;\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAAXNSR0IArs4c6QAAAS9QTFRFAAAA////zMz/qqrV1dXV1dX/ucHwtMPwsb/qs8HqusHqusjxucbttsLpuMTrtsHotsHsuMPquMPtuMLrt8Trt8HptsLquMHqtsHqucTquMPstMHqt8Hqt8Hst8TstsPqtsPst8Pqt8PsuMTst8PqtsPquMPqtsPrtsPstsLrt8Prt8LrtsLqtsPstsLqtsLst8Pqt8Pst8Prt8PrtsPqtsLqt8Prt8LrtsPrt8Trt8LrtcHqtsPqt8Prt8PstsPqtsPrtcLpt8LrtsLrtsPrt8PrtsPqtsPrt8PstsLrtsPrt8PrtsPqtsPqt8TstsPrt8Pst8Prt8Lrt8Prt8PrtsLqt8Prt8PrtsPqtsPrt8Prt8Prt8Lqt8Prt8Pst8PruMPst8Lrt8PrtsPrt8PrRIOgkQAAAGR0Uk5TAAEFBgYGISIkJSUlOjtBQkJISEtOUlRWV1ddX19fX3t7g4OFh4iIiYmLjY6PkJKTlJSYnJ2eorGztLvCxMTFx8jJycrLzc/P1NXV1djZ3+Dg5+ru8fLz9fb29vf4+Pn6+vv7/SHs7+sAAAELSURBVBjTVdDnUsJQEAXgG0GxgkERRBSQBAVCQLpUpShRejW0BO6+/zOYGzKauz+/mZ1zdhH6n6Poxz2D6LEJk510R+txfLQB9YvSE/EtLExBMetpotfnL8StWc+SjVCklM1jAFXyGvbSHjzbHztj0GaV2+8m21ys6L/khpopTVbPSDQGsatUK+DMYFjXrw9IF7EXeiqmXmfddAEvay5itvh7P2L3t2aA5fmiemMhtwkjni8FHYGulixX3MRQdLIRzrMdjk3L8FP2WPXkzx1Mxfx4mCnM5fLt4b7ig6TCVtvEeFHxGIYY37dCKsOy6rb+XW3ouqbnmlQFpe6yUJ9kfNKqqd9BqTfHmu0Xzf03Id8uww4AAAAASUVORK5CYII=\"","import * as THREE from \"three\";\nimport { Easing, Tween } from \"@tweenjs/tween.js\";\n\nimport { lonlatToSphere } from \"@/utils/coord\";\n\nconst fs = `\n    varying float opacity;\n    uniform vec3 color;\n    void main(){\n      if(opacity <= 0.1) {\n        // gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);\n        discard;\n      } else {\n        gl_FragColor = vec4(color, 1.0);\n      }\n    }\n  `;\n\nconst vs = `\n    attribute float percent;\n    uniform float time;\n    uniform float number;\n    uniform float speed;\n    uniform float length;\n    uniform float size;\n\n    varying float opacity;\n\n    void main() {\n      float l = clamp(1.0 - length, 0.0, 1.0);\n\n      gl_PointSize = clamp(fract(percent * number + l - time * number * speed) - l, 0.0, 1.0) * size * (1.0 / length);\n      opacity = gl_PointSize / size;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  `;\n\nclass FlyLine {\n  count: number[];\n  curves: THREE.CatmullRomCurve3[];\n  mainDistance: number[];\n  particles: THREE.Points[];\n  radius: number;\n  flyLine: any[];\n  requestAnimationId: number;\n  number: number;\n  tweenMove: any;\n  constructor(radius: number = 1, flyLine: any[] = [], number: number = 500) {\n    this.radius = radius;\n    this.count = [];\n    this.curves = [];\n    this.mainDistance = [];\n    this.particles = [];\n    this.flyLine = flyLine;\n    this.number = number;\n    this.requestAnimationId = 0;\n  }\n\n  // 废弃\n  getData() {\n    //请求数据\n    const resData = [\n      {\n        from: [118.267, 37.345],\n        to: [117.258, 38.134],\n      },\n      {\n        from: [113.267, 35.345],\n        to: [115.258, 36.134],\n      },\n    ];\n  }\n\n  getPoints() {\n    const result: THREE.Vector3[][] = [];\n    for (let i = 0; i < this.flyLine.length; i += 1) {\n      this.count.push(0);\n      const xyCoordFrom = lonlatToSphere(\n        this.flyLine[i].from[0],\n        this.flyLine[i].from[1],\n        this.radius\n      );\n      const xyCoordTo = lonlatToSphere(\n        this.flyLine[i].to[0],\n        this.flyLine[i].to[1],\n        this.radius\n      );\n      const xyCoordMid = lonlatToSphere(\n        (this.flyLine[i].from[0] + this.flyLine[i].to[0]) / 2,\n        (this.flyLine[i].from[1] + this.flyLine[i].to[1]) / 2,\n        this.radius + 1\n      );\n\n      const fromPoint = new THREE.Vector3(\n        xyCoordFrom.x,\n        xyCoordFrom.y,\n        xyCoordFrom.z\n      );\n\n      const midPoint = new THREE.Vector3(\n        xyCoordMid.x,\n        xyCoordMid.y,\n        xyCoordMid.z\n      );\n      const toPoint = new THREE.Vector3(xyCoordTo.x, xyCoordTo.y, xyCoordTo.z);\n\n      const curve = new THREE.CatmullRomCurve3([fromPoint, midPoint, toPoint]);\n      const distance = curve.getLength();\n      this.mainDistance.push(distance);\n      this.curves.push(curve);\n      const points = curve.getPoints(500);\n\n      result.push(points);\n    }\n\n    return result;\n  }\n\n  setParticles(\n    inputPoints: THREE.Vector3[][],\n    color = [new THREE.Vector3(1, 0, 0)]\n  ) {\n    let index = 0;\n    inputPoints.forEach((points) => {\n      const geometry = new THREE.BufferGeometry().setFromPoints(points);\n      const length = points.length;\n      const percents = new Float32Array(length);\n      for (let i = 0; i < length; i += 1) {\n        percents[i] = i / length;\n      }\n      geometry.setAttribute(\"percent\", new THREE.BufferAttribute(percents, 1));\n\n      // const number = 500;\n      // console.log(number);\n      const uniforms = {\n        time: {\n          value: 0.3,\n        },\n        number: {\n          value: this.number,\n          // value: 500\n        },\n        speed: {\n          value: 0.003,\n        },\n        length: {\n          value: 0.1,\n        },\n        size: {\n          value: 5.0,\n        },\n        color: {\n          value: color[index],\n        },\n      };\n\n      const shaderMaterial = new THREE.ShaderMaterial({\n        uniforms,\n        vertexShader: vs,\n        fragmentShader: fs,\n        transparent: true,\n      });\n\n      const particle = new THREE.Points(geometry, shaderMaterial);\n\n      this.particles.push(particle);\n      index++;\n    });\n  }\n\n  createPointCanvas(size: number) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = canvas.height = size;\n    const context = canvas.getContext(\"2d\");\n    if (context != null) {\n      context.fillStyle = \"rgba(255,255,255,.0)\";\n      context.beginPath();\n      context.arc(size / 2, size / 2, size / 2, 0, Math.PI * 2);\n      context.fillStyle = \"white\";\n      context.fill();\n      context.closePath();\n    }\n    return canvas;\n  }\n\n  updateParticles() {\n    let time = 0;\n    const updateAction = () => {\n      for (let k = 0; k < this.particles.length; k += 1) {\n        if (time >= 1.2) time = 0;\n        time += 0.01;\n        // @ts-ignore\n        this.particles[k].material.uniforms.time.value = time;\n      }\n    };\n\n    const animation = () => {\n      this.requestAnimationId = requestAnimationFrame(animation);\n      updateAction();\n    };\n    animation();\n  }\n\n  moveAction(startLocation: any, endLocation: any, duration: number) {\n    const updateAction = (time: number) => {\n      for (let k = 0; k < this.particles.length; k += 1) {\n        // @ts-ignore\n        this.particles[k].material.uniforms.time.value = time;\n      }\n    };\n    this.tweenMove = new Tween(startLocation)\n      .to(endLocation, duration)\n      .easing(Easing.Linear.None)\n      .onUpdate(() => {\n        // if(startLocation.time >= 1.0) startLocation.time = 0.0;\n        updateAction(startLocation.time);\n      })\n      .onStop(() => {\n        this.tweenMove = null;\n      })\n      .onComplete(() => {\n        this.tweenMove = null;\n      })\n      .repeat(Infinity)\n      .start();\n\n    const animate = (time: number) => {\n      if (this.tweenMove !== null) {\n        this.requestAnimationId = requestAnimationFrame(animate);\n        this.tweenMove.update(time);\n      }\n    };\n    animate(0);\n  }\n\n  addFromScene(scene: THREE.Mesh) {\n    this.particles.forEach((item) => {\n      // console.log(item);\n      scene.add(item);\n    });\n  }\n\n  destroy(scene: THREE.Mesh) {\n    if (this.requestAnimationId) cancelAnimationFrame(this.requestAnimationId);\n    for (let i = 0; i < this.particles.length; i++) {\n      scene.remove(this.particles[i]);\n      this.particles[i].geometry.dispose();\n      // @ts-ignore\n      this.particles[i].material.dispose();\n    }\n  }\n}\n\nexport { FlyLine };\n","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_router_view = _resolveComponent(\"router-view\")!\n\n  return (_openBlock(), _createBlock(_component_router_view))\n}","import { reactive, readonly } from \"vue\";\n\nimport { BaseThree } from \"@/utils/basethree\";\n\ninterface CurrentThree {\n  scene: BaseThree | null;\n}\n\nconst useCurrentSceneState = () => {\n  const currentSceneState = reactive<CurrentThree>({\n    scene: null,\n  });\n\n  const setCurrentSceneState = (three: BaseThree) => {\n    currentSceneState.scene = three;\n  };\n\n  return { currentScene: (currentSceneState), setCurrentSceneState };\n};\n\nexport { useCurrentSceneState };\n","import { ref, readonly } from \"vue\";\r\n\r\nconst usePopupShowState = () => {\r\n  const popupShowState = ref(false);\r\n\r\n  const setPopupShowState = (payload: boolean) => {\r\n    popupShowState.value = payload;\r\n  };\r\n\r\n  return { popupShow: readonly(popupShowState), setPopupShowState };\r\n};\r\n\r\nexport { usePopupShowState };\r\n","\nimport { provide } from \"vue\";\nimport { useToolbarState } from \"@/components/Layout/ToolBar/main\";\nimport { useCurrentSceneState } from \"@/components/Layout/ToolBar/reactattr\";\nimport { usePopupShowState } from \"@/components/Layout/Popup/popupatte\";\nexport default {\n  name: \"App\",\n  setup() {\n    const { toolbarState, setToolbarState } = useToolbarState();\n    provide(\"toolbarState\", toolbarState);\n    provide(\"setToolbarState\", setToolbarState);\n\n    const { currentScene, setCurrentSceneState } = useCurrentSceneState();\n    provide(\"currentScene\", currentScene);\n    provide(\"setCurrentSceneState\", setCurrentSceneState);\n\n    const { popupShow, setPopupShowState } = usePopupShowState();\n    provide(\"popupShow\", popupShow);\n    provide(\"setPopupShowState\", setPopupShowState);\n  },\n};\n","import { render } from \"./App.vue?vue&type=template&id=3000013a&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=3000013a&lang=css\"\n\nimport exportComponent from \"/Users/wwwwwk/Desktop/items/3dself/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"@/router\";\n\nconst app = createApp(App);\napp.use(router);\n\napp.mount(\"#app\");\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAAXNSR0IArs4c6QAAAQtQTFRFAAAAAP//M2bMM2b/KoDVNmzYNXHaMmrVN27WNW7XNGzUM27YNmzVNW7VNW7YM23WNG/YNXDXNHDYNW7VNW/WNW/YNG7WNm7UNm7XNm7WN2/WNm3XN27VN2/VNm/WNm7WNW7VNW7XNm7VNm/WNW3WNW/UN27WNm7VNm/VNW7WNm/XNm7WNm7VNW7VNm7WNW/XNm7WNm/WN27VNm7VN2/VN2/XNm/XNm7WNm/WNW7VN27VNm7VNm/WN2/WNm/VNm/WNm/WNm7VNm/VNm/WNm/WNm7WNm/WNm7WN27WN2/WNm7WN27WN2/WN2/VN2/WN27VN2/WN2/XN2/WNm/WNm/WN2/WN2/VNm/WN2/W+/I/MQAAAFh0Uk5TAAEFBQYhIiQlOjtBQkhIS05SVFZXXF1fX3uDhYeHiImLi42Oj4+QkpOUmJydnqKxs7S7wsTExcfIycnKy83Pz9TV1dXY2d/g4Ofq7vHy8/X29vf4+fr7/ejSnfoAAAEESURBVBjTXdDZVsIwEAbgBKpUWWRR24IUZSuyCwLKIrLvUChp5v2fxLSeVuLc5TvJ5J9B6K+u0l8yRnxd57bmWOLVl1+fgUy4u6L2oWZ3vIqF+UK91UymbgfxtZd4blZqFICMHh37Xqb88ekGWBlVx54yDSWQXDEj/dBvv94yc1ccKMEyBaMb9lhZtHki1Si+7WelOj11Il4rc/5z8eJXBnug+uHYjgrWbLm1qjbjAWXGftZbMctQenvO3lSmyWBJB/393jY0NGGn1Tarcv3gGpLHBEz2ktJjyzGEpQmxIsOpHRPcqbFsq9GJChf7sZV0IwK3SSyNjH7Y+2/n+KEa8lycfwAhuDA3XpPMoAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAMAAAAMs7fIAAAAAXNSR0IArs4c6QAAAI1QTFRFAAAAAAAAKlXVM2bMM3PZMW3OM23bN27YNW3UN27WNm3WNm7XNm7WNW7VNm7WNW/WNm/VNW7WNW/VNm7WN2/VNm7VNW7VN23VNm7WN27WN27WNm/VNm7WNm/WNm/WNm7WN2/WN27WNm/WNm7VNm7VN2/VNm7VNm/VNm7WN27VN27WNm/WN27WNm7WN2/WRafgggAAAC50Uk5TAAEGChQVI0FNb3d/hIeJj5OUlpyfq6yxubq7vcDBxsfN0tTh4+3v7/Hz8/n8/tHlgW0AAACUSURBVBjTRdDpEoIwDATgeFuLHALeBxVrWoG8/+NpW2n25zeZndkAEjUwRhG1QES2GmOJ0IkWSV+KnHKhnTQfvZ+rLSxfG1hbNDeASkR4r2T2a6sShkntpWfYDV5KBlV4EQyL0JMzTM9eiOHQhRuGSxp6GGauR1ltIxzR3N0ulPVQyFOXSvwvNdkY46RFvMb/PBCfXx+8FcYWaCLQAAAAAElFTkSuQmCC\"","import * as THREE from \"three\";\r\n\r\nimport { BaseThree } from \"@/utils/basethree\";\r\n\r\nimport { Heatmap } from \"@/components/Earth/heatmap\";\r\nimport { FlyLine } from \"@/components/Earth/flyline\";\r\nimport { FeaturePoi } from \"@/components/Earth/featurepoint\";\r\n\r\nlet earth: THREE.Mesh<THREE.SphereGeometry, THREE.Material>,\r\n  ambientLight: THREE.AmbientLight,\r\n  hemisLight: THREE.HemisphereLight,\r\n  baseThree: BaseThree,\r\n  animateFrame: number,\r\n  flyLine: FlyLine,\r\n  heatmapMesh: THREE.Mesh<THREE.SphereGeometry, THREE.MeshBasicMaterial>,\r\n  featurePoint: FeaturePoi,\r\n  changeHeatmap: any;\r\n\r\nconst init = (domContainer: HTMLDivElement) => {\r\n  baseThree = new BaseThree(domContainer);\r\n  baseThree.camera.position.set(0, 0, 30);\r\n  baseThree.orbitControl.minDistance = 22;\r\n  baseThree.orbitControl.maxDistance = 42;\r\n\r\n  ambientLight = new THREE.AmbientLight(0x555555);\r\n  baseThree.scene.add(ambientLight);\r\n\r\n  hemisLight = new THREE.HemisphereLight(0xffffff, 0x080820, 1);\r\n  hemisLight.position.copy(baseThree.camera.position);\r\n  baseThree.scene.add(hemisLight);\r\n\r\n  const geometry = new THREE.SphereGeometry(10, 32, 32);\r\n\r\n  const earthPng = require(\"@/assets/earth/earth.jpg\");\r\n  const bumpPng = require(\"@/assets/earth/earth_bump.jpg\");\r\n  const specPng = require(\"@/assets/earth/earth_spec.jpg\");\r\n\r\n  const materia = new THREE.MeshPhongMaterial({\r\n    map: new THREE.TextureLoader().load(earthPng),\r\n    bumpMap: new THREE.TextureLoader().load(bumpPng),\r\n    bumpScale: 0.15,\r\n    specularMap: new THREE.TextureLoader().load(specPng),\r\n    specular: new THREE.Color(\"#909090\"),\r\n    shininess: 5,\r\n    transparent: true,\r\n    color: 0xf7e7cf,\r\n    // wireframe: true\r\n  });\r\n\r\n  earth = new THREE.Mesh(geometry, materia);\r\n  baseThree.camera.lookAt(earth.position);\r\n\r\n  baseThree.scene.add(earth);\r\n};\r\n\r\nconst animate = () => {\r\n  animateFrame = requestAnimationFrame(animate);\r\n  hemisLight.position.copy(baseThree.camera.position);\r\n  baseThree.renderer.render(baseThree.scene, baseThree.camera);\r\n  baseThree.orbitControl.update();\r\n};\r\n\r\nconst openHeatmap = async () => {\r\n  const config = {\r\n    radius: 20,\r\n    gradient: {\r\n      0.2: \"rgba(0,0,255,0.2)\",\r\n      0.3: \"rgba(43,111,231,0.3)\",\r\n      0.4: \"rgba(2,192,241,0.4)\",\r\n      0.6: \"rgba(44,222,148,0.6)\",\r\n      0.8: \"rgba(254,237,83,0.8)\",\r\n      0.9: \"rgba(255,118,50,0.9)\",\r\n      1: \"rgba(255,64,28,1)\",\r\n    },\r\n  };\r\n\r\n  const heatmap = new Heatmap(config);\r\n  await heatmap.setHeatmap();\r\n\r\n  const heatmapMateria = new THREE.MeshBasicMaterial({\r\n    map: new THREE.CanvasTexture(heatmap.canvas),\r\n    transparent: true,\r\n  });\r\n  heatmapMesh = new THREE.Mesh(earth.geometry, heatmapMateria);\r\n  earth.add(heatmapMesh);\r\n\r\n  changeHeatmap = async () => {\r\n    const zoom = baseThree.zoom;\r\n    const oldZoom = baseThree.oldZoom;\r\n    if (oldZoom !== zoom) {\r\n      const radius = ((zoom - 42) / (22 - 42)) * (5 - 20) + 20;\r\n      await heatmap.refresh(radius);\r\n\r\n      const tempMateria = new THREE.MeshBasicMaterial({\r\n        map: new THREE.CanvasTexture(heatmap.canvas),\r\n        transparent: true,\r\n      });\r\n\r\n      heatmapMesh.material = tempMateria;\r\n      heatmapMateria.dispose();\r\n      baseThree.changeZoom();\r\n    }\r\n  };\r\n\r\n  baseThree.controlChange(changeHeatmap);\r\n};\r\n\r\nconst closeHeatmap = () => {\r\n  if (heatmapMesh) {\r\n    earth.remove(heatmapMesh);\r\n    heatmapMesh.geometry.dispose();\r\n    heatmapMesh.material.dispose();\r\n    baseThree.removeChange(changeHeatmap);\r\n  }\r\n};\r\n\r\nconst openFlyline = async () => {\r\n  // 获取数据\r\n  const resData = [\r\n    {\r\n      from: [128.267, 17.345],\r\n      to: [117.258, 38.134],\r\n    },\r\n    {\r\n      from: [133.267, 35.345],\r\n      to: [115.258, 26.134],\r\n    },\r\n  ];\r\n  const color = [new THREE.Vector3(1, 0, 0), new THREE.Vector3(1, 0, 0)];\r\n\r\n  flyLine = new FlyLine(10, resData, 500);\r\n  const points = flyLine.getPoints();\r\n\r\n  flyLine.setParticles(points, color);\r\n\r\n  flyLine.addFromScene(earth);\r\n\r\n  // flyLine.updateParticles();\r\n  flyLine.moveAction({ time: 0.0 }, { time: 0.66 }, 1000);\r\n};\r\n\r\nconst closeFlyline = () => {\r\n  if (flyLine) {\r\n    flyLine.destroy(earth);\r\n  }\r\n};\r\n\r\nconst openFeaturePoint = async () => {\r\n  featurePoint = new FeaturePoi(earth);\r\n  const res = await featurePoint.getDatas();\r\n  // console.log(res);\r\n  featurePoint.setPoints(res.data.features, 10, earth);\r\n};\r\n\r\nconst closeFeaturePoint = () => {\r\n  if (featurePoint) {\r\n    featurePoint.destroy(earth);\r\n  }\r\n};\r\n\r\nconst destroy = () => {\r\n  cancelAnimationFrame(animateFrame);\r\n  hemisLight.dispose();\r\n  ambientLight.dispose();\r\n  closeFlyline();\r\n  closeHeatmap();\r\n  closeFeaturePoint();\r\n  earth.geometry.dispose();\r\n  earth.material.dispose();\r\n  earth.children.forEach((item: any) => {\r\n    item.geometry.dispose();\r\n    item.material.dispose();\r\n  });\r\n  baseThree.destroy();\r\n};\r\n\r\nexport {\r\n  init,\r\n  animate,\r\n  destroy,\r\n  openHeatmap,\r\n  closeHeatmap,\r\n  openFlyline,\r\n  closeFlyline,\r\n  openFeaturePoint,\r\n  closeFeaturePoint,\r\n  baseThree,\r\n};\r\n","import axios from \"axios\";\r\n\r\nconst heatmapUrl =\r\n  \"https://ncportal.geoscene.cn:6443/arcgis/rest/services/SampleWorldCities/MapServer/0/query\";\r\nconst getHeatmapPoint = () => {\r\n  return axios.get(heatmapUrl, { params: { where: \"1=1\", f: \"json\" } });\r\n};\r\n\r\nconst featurePointUrl =\r\n  \"https://services.arcgis.com/LG9Yn2oFqZi5PnO5/ArcGIS/rest/services/Armed_Conflict_Location_Event_Data_ACLED/FeatureServer/1/query\";\r\nconst getFeaturePoint = () => {\r\n  return axios.get(featurePointUrl, {\r\n    params: {\r\n      f: \"json\",\r\n      where:\r\n        \"(EVENT_DATE BETWEEN timestamp '2018-12-18' AND timestamp '2018-12-20')\",\r\n      outFields: \"*\",\r\n    },\r\n  });\r\n};\r\nconst getPointMsg = (id: number) => {\r\n  return axios.get(featurePointUrl, {\r\n    params: { f: \"json\", where: `OBJECTID = '${id}'\", outFields: \"OBJECTI` },\r\n  });\r\n};\r\n\r\nexport { getHeatmapPoint, getFeaturePoint, getPointMsg };\r\n","import { getHeatmapPoint } from \"@/api/earth\";\r\nimport { lonlatToFlat } from \"@/utils/coord\";\r\n\r\ninterface heatmapOption {\r\n  radius: number;\r\n  gradient: any;\r\n}\r\n\r\nclass Heatmap {\r\n  config;\r\n  canvas: HTMLCanvasElement;\r\n  context: any;\r\n  minnum = 0;\r\n  maxnum = 0;\r\n  heatPluginData: any[] = [];\r\n  constructor(config: heatmapOption) {\r\n    this.config = config;\r\n    // this.createCanvas();\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = 2048;\r\n    canvas.height = 1024;\r\n\r\n    this.canvas = canvas;\r\n    this.context = this.canvas.getContext(\"2d\");\r\n  }\r\n  async getData() {\r\n    const heatData: any = await getHeatmapPoint();\r\n    const temp: any[] = [];\r\n    heatData.data.features.forEach((item: any) => {\r\n      const target = lonlatToFlat(item.geometry.x, item.geometry.y);\r\n      const randomNum = Math.round(Math.random() * 20 + 40);\r\n\r\n      temp.push([Math.round(target.x), Math.round(target.y), randomNum]);\r\n      if (this.minnum > randomNum) this.minnum = randomNum;\r\n      if (this.maxnum < randomNum) this.maxnum = randomNum;\r\n    });\r\n    this.heatPluginData = temp;\r\n  }\r\n  async setHeatmap() {\r\n    if (this.heatPluginData.length === 0) {\r\n      await this.getData();\r\n    }\r\n    // console.log(heatPluginData);\r\n    this.pointOper(this.heatPluginData);\r\n    this.mapColors();\r\n  }\r\n  pointOper(points: any[]) {\r\n    points.forEach((point) => {\r\n      this.context.beginPath();\r\n      const alpha = (point[2] - this.minnum) / (this.maxnum - this.minnum);\r\n      this.context.globalAlpha = alpha;\r\n      this.context.arc(\r\n        point[0],\r\n        point[1],\r\n        this.config.radius,\r\n        0,\r\n        Math.PI * 2,\r\n        true\r\n      );\r\n      const gradient = this.context.createRadialGradient(\r\n        point[0],\r\n        point[1],\r\n        0,\r\n        point[0],\r\n        point[1],\r\n        this.config.radius\r\n      );\r\n      gradient.addColorStop(0, \"rgba(0,0,0,1)\");\r\n      gradient.addColorStop(1, \"rgba(0,0,0,0)\");\r\n      this.context.fillStyle = gradient;\r\n      this.context.closePath();\r\n      this.context.fill();\r\n    });\r\n  }\r\n  mapColors() {\r\n    const palette = this.setColorPaint();\r\n    const img = this.context.getImageData(\r\n      0,\r\n      0,\r\n      this.canvas.width,\r\n      this.canvas.height\r\n    );\r\n    const imageData = img.data;\r\n    for (let i = 0; i < imageData.length; i++) {\r\n      const alpha = imageData[i];\r\n      const offset = alpha * 4;\r\n      if (!offset) continue;\r\n      imageData[i - 3] = palette[offset];\r\n      imageData[i - 2] = palette[offset + 1];\r\n      imageData[i - 1] = palette[offset + 2];\r\n    }\r\n    this.context.putImageData(\r\n      img,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      this.canvas.width,\r\n      this.canvas.height\r\n    );\r\n  }\r\n  setColorPaint() {\r\n    const paletteCanvas = document.createElement(\"canvas\");\r\n    const paletteCtx: any = paletteCanvas.getContext(\"2d\");\r\n    const gradientConfig = this.config.gradient;\r\n    paletteCanvas.width = 256;\r\n    paletteCanvas.height = 1;\r\n    const gradient = paletteCtx.createLinearGradient(0, 0, 256, 1);\r\n    for (const key in gradientConfig) {\r\n      gradient.addColorStop(parseFloat(key), gradientConfig[key]);\r\n    }\r\n    paletteCtx.fillStyle = gradient;\r\n    paletteCtx.fillRect(0, 0, 256, 1);\r\n    return paletteCtx.getImageData(0, 0, 256, 1).data;\r\n  }\r\n  async refresh(radius: number) {\r\n    this.config.radius = radius;\r\n    this.clearCanvas();\r\n    await this.setHeatmap();\r\n  }\r\n  clearCanvas() {\r\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n  }\r\n}\r\n\r\nexport { Heatmap };\r\n","import * as THREE from \"three\";\r\n\r\nimport { getFeaturePoint } from \"@/api/earth\";\r\nimport { lonlatToSphere } from \"@/utils/coord\";\r\n\r\nclass FeaturePoi {\r\n  earth: THREE.Mesh;\r\n  featurePoiMesh: THREE.Mesh;\r\n  constructor(earth: THREE.Mesh) {\r\n    this.earth = earth;\r\n    this.featurePoiMesh = new THREE.Mesh();\r\n  }\r\n\r\n  async getDatas() {\r\n    const result = await getFeaturePoint();\r\n\r\n    return result;\r\n  }\r\n\r\n  setPoints(points: any, radius: number, earth: THREE.Mesh) {\r\n    for (let i = 0; i < points.length; i++) {\r\n      const xyCoord = lonlatToSphere(\r\n        points[i].geometry.x,\r\n        points[i].geometry.y,\r\n        radius\r\n      );\r\n\r\n      const { resRadius, resOpacity, color, objectId } = this.getCircleOptions(\r\n        points[i].attributes\r\n      );\r\n\r\n      const circleGeometry = new THREE.BoxGeometry(0.1, 0.1, resRadius);\r\n      const circleMateria = new THREE.MeshBasicMaterial({\r\n        color,\r\n        transparent: true,\r\n        opacity: resOpacity,\r\n      });\r\n      circleGeometry.applyMatrix4(\r\n        new THREE.Matrix4().makeTranslation(0, 0, -0.5 * resRadius)\r\n      );\r\n      const circleMesh = new THREE.Mesh(circleGeometry, circleMateria);\r\n      circleMesh.name = objectId;\r\n      circleMesh.position.set(xyCoord.x, xyCoord.y, xyCoord.z);\r\n      circleMesh.lookAt(earth.position);\r\n      circleMesh.updateMatrix();\r\n      this.featurePoiMesh.add(circleMesh);\r\n    }\r\n\r\n    earth.add(this.featurePoiMesh);\r\n  }\r\n\r\n  getCircleOptions(attributes: any) {\r\n    let resRadius = 0;\r\n    let resOpacity = 0;\r\n    if (attributes.FATALITIES > 20) {\r\n      resRadius = 32 / 8;\r\n      resOpacity = 1.0;\r\n    } else if (attributes.FATALITIES > 15) {\r\n      resRadius = 26 / 8;\r\n      resOpacity = 0.9;\r\n    } else if (attributes.FATALITIES > 10) {\r\n      resRadius = 20 / 8;\r\n      resOpacity = 0.8;\r\n    } else if (attributes.FATALITIES > 5) {\r\n      resRadius = 14 / 8;\r\n      resOpacity = 0.7;\r\n    } else {\r\n      resRadius = 8 / 8;\r\n      resOpacity = 0.6;\r\n    }\r\n\r\n    let color = new THREE.Color(1, 1, 1);\r\n    switch (attributes.EVENT_TYPE) {\r\n      case \"Protests\":\r\n        color = new THREE.Color(237 / 255, 81 / 255, 81 / 255);\r\n        break;\r\n      case \"Explosions/Remote violence\":\r\n        color = new THREE.Color(20 / 255, 158 / 255, 206 / 255);\r\n        break;\r\n      case \"Battles\":\r\n        color = new THREE.Color(167 / 255, 198 / 255, 54 / 255);\r\n        break;\r\n      case \"Riots\":\r\n        color = new THREE.Color(158 / 255, 85 / 255, 156 / 255);\r\n        break;\r\n      case \"Violence against civilians\":\r\n        color = new THREE.Color(252 / 255, 146 / 255, 31 / 255);\r\n        break;\r\n      case \"Strategic developments\":\r\n        color = new THREE.Color(255 / 255, 222 / 255, 62 / 255);\r\n        break;\r\n    }\r\n\r\n    const objectId = attributes.OBJECTID;\r\n\r\n    return { resRadius, resOpacity, color, objectId };\r\n  }\r\n\r\n  destroy(earth: THREE.Mesh) {\r\n    // console.log(\"destroy\");\r\n    while (this.featurePoiMesh.children.length > 0) {\r\n      (this.featurePoiMesh.children[0] as THREE.Mesh).geometry.dispose();\r\n      // @ts-ignore\r\n      (this.featurePoiMesh.children[0] as THREE.Mesh).material.dispose();\r\n      this.featurePoiMesh.remove(this.featurePoiMesh.children[0]);\r\n    }\r\n    // console.log(this.featurePoiMesh);\r\n\r\n    this.featurePoiMesh.geometry.dispose();\r\n    // @ts-ignore\r\n    this.featurePoiMesh.material.dispose();\r\n\r\n    earth.remove(this.featurePoiMesh);\r\n  }\r\n}\r\n\r\nexport { FeaturePoi };\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAMAAABVlYYBAAAAAXNSR0IArs4c6QAAAIFQTFRFAAAAv7//zMz/v7/fv7/qr7/vtMPwuMLrtr/tu8PutMPpuMbqt8TrucbsuMLstsLpt8PruMPsuMPsuMTrtsLqt8Pqt8PquMTrt8Prt8Pqt8Lrt8Trt8Prt8PruMPrtsPqt8Prt8Prt8Prt8Prt8PruMPrt8Prt8Prt8Prt8Prt8PrYq+vqQAAACp0Uk5TAAQFCAwQERkcHiIkJyg2O0BEXWiTlJWWoq6xtMDCyNPe4+Tq7e/2+vz+8Wx+pAAAAI1JREFUGBltwYkWgUAABdCH9qFdQvuq9/8fqBxTKfdiccIf3svDXsoUOy5JF1sJyQQbLicuVjTbzznJfVvD5HDNGq412e0IpeZWrQCXir+qC0ai4lol8CEKLgqBL6Ol1BqYlZRKzFQuVEgOFw6kgKPu3nEUQArJPtKhRz0ZQnoMsYWJFQ9PSOYZkjAxegOdzB0wKdalBgAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"img/earth_bump.55b39306.jpg\";","module.exports = __webpack_public_path__ + \"img/earth_spec.dc4fc602.jpg\";"],"sourceRoot":""}