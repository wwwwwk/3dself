(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bcff7d84"],{"0bf6":function(n,e,t){},"0f64":function(n,e,t){},"4c53":function(n,e,t){"use strict";var o=t("23e7"),r=t("857a"),a=t("af03");o({target:"String",proto:!0,forced:a("sub")},{sub:function(){return r(this,"sub","","")}})},"857a":function(n,e,t){var o=t("e330"),r=t("1d80"),a=t("577e"),i=/"/g,s=o("".replace);n.exports=function(n,e,t,o){var c=a(r(n)),l="<"+e;return""!==t&&(l+=" "+t+'="'+s(a(o),i,"&quot;")+'"'),l+">"+c+"</"+e+">"}},a3b7:function(n,e,t){"use strict";t("0f64")},af03:function(n,e,t){var o=t("d039");n.exports=function(n){return o((function(){var e=""[n]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b032:function(n,e,t){n.exports=t.p+"img/water.9ba47ff7.jpg"},bd7e:function(n,e,t){"use strict";t.r(e);var o=t("7a23"),r={class:"gongfang-main"};function a(n,e,t,a,i,s){var c=Object(o["D"])("GongfangPage");return Object(o["v"])(),Object(o["f"])("div",r,[Object(o["j"])(c)])}var i,s,c,l,u,v,f,d,p,m,h,b,g,w,P=t("1da1"),y=(t("96cf"),t("5a89")),M=t("15f8"),x=t("02d2"),C=(t("cb29"),t("4c53"),t("38cf"),t("22b5")),j=t("cbb3"),O="\n  varying vec2 vUv;\n  varying vec3 vPosition;\n  void main() {\n    vUv = uv;\n    vPosition = position;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n",S="\n  uniform sampler2D sphereTexture;\n  uniform vec3 spherePos1[10];\n  varying vec2 vUv;\n  varying vec3 vPosition;\n  uniform float ring;\n  void main() {\n    vec4 finalColor = vec4(-1.0, -1.0, -1.0, -1.0);\n    for(int i=0; i<10; i++) {\n      if(spherePos1[i].x == -1.0 && spherePos1[i].y == -1.0 && spherePos1[i].z == -1.0) {\n        vec4 color = vec4(texture2D(sphereTexture, vUv));\n        finalColor = vec4(color.xyz, 0.2);\n      } else {\n        float dis = distance(vPosition, spherePos1[i]);\n        if(dis > ring && dis < (2.0)) {\n          gl_FragColor = vec4(0.0,1.0,0.0, 0.3);\n          return;\n        } else {\n          vec4 color = vec4(texture2D(sphereTexture, vUv));\n          finalColor = vec4(color.xyz, 0.2);\n        }\n      }\n    }\n    if(vUv.y < 0.03)\n      gl_FragColor = finalColor;\n    else \n      gl_FragColor = vec4(finalColor.xyz, 0.08);\n  }\n",F=function(){var n=new y["Db"](50,36,36,0,2*Math.PI,0,Math.PI/180*90),e=U(),t=new y["k"](e),o=new y["xb"]({vertexShader:O,fragmentShader:S,uniforms:{sphereTexture:{value:t},spherePos1:{type:"fv",value:new Array(30).fill(-1)},ring:{value:.1}},transparent:!0,side:y["u"]});return s=new y["X"](n,o),s.position.set(0,0,0),s.layers.enable(x["a"]),s},U=function(){var n=document.createElement("canvas");n.width=128,n.height=128;var e=n.getContext("2d"),t=e.createLinearGradient(0,0,0,128);return t.addColorStop(0,"#FFF"),t.addColorStop(.98,"rgba(3,12,255,0.2)"),t.addColorStop(1,"rgba(3,1,136,1)"),e.fillStyle=t,e.fillRect(0,0,128,128),n},z=function(n){i&&clearInterval(i),i=setInterval((function(){A(n)}),3e3)},A=function(n){I(n);var e=[],t=[],o=[];c=new j["a"](void 0,void 0,void 0,1);for(var r=0;r<10;r++){var a=k();e.push(a.end.x),e.push(a.end.y),e.push(a.end.z);var i=[a.start,a.end];t.push(i),o.push(new y["p"](1,0,1))}c.setParticles(t,o);for(var s=0;s<c.particles.length;s++)n.add(c.particles[s]);c.moveAction({time:0},{time:1},800),_(e),D({time:0},{time:1},1500)},I=function(n){s.material.uniforms.spherePos1.value=new Array(30).fill(-1),c&&c.destroy(n)},_=function(n){s.material.uniforms.spherePos1.value=n},k=function(){var n=new y["Pb"](Math.floor(101*Math.random())+-50+30,Math.floor(51*Math.random())+0+50,Math.floor(101*Math.random())+-50+30),e=new y["Pb"](Math.floor(41*Math.random())+-20,Math.floor(21*Math.random())+0,Math.floor(41*Math.random())+-20),t=e.sub(n).normalize(),o=new y["tb"](n,t),r=new y["Pb"];return o.intersectSphere(new y["Cb"](new y["Pb"](0,0,0),50),r),{start:n,end:r}},D=function(n,e,t){var o=function(n){s.material.uniforms.ring.value=n};l=new C["b"](n).to(e,t).easing(C["a"].Linear.None).onUpdate((function(){o(n.time)})).onStop((function(){l=null})).onComplete((function(){l=null})).repeat(1/0).start();var r=function n(e){null!==l&&(l.update(e),u=requestAnimationFrame(n))};r(0)},T=function(n){u&&cancelAnimationFrame(u),i&&clearInterval(i),c&&c.destroy(n),n.remove(s),s.geometry.dispose(),s.material.dispose()},R="\n  varying vec2 vUv;\n  varying vec3 vPosition;\n  void main() {\n    vUv = uv;\n    vPosition = position;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n",q="\n  uniform sampler2D sphereTexture;\n  uniform vec3 pointPos[3];\n  uniform float ring;\n  varying vec2 vUv;\n  varying vec3 vPosition;\n  void main() {\n    vec3 color = vec4(texture2D(sphereTexture, vUv)).xyz;\n    vec4 finalColor = vec4(-1.0, -1.0, -1.0, -1.0);\n    for(int i=0; i<3; i++) {\n      if(pointPos[i].x == -1.0 && pointPos[i].y == -1.0 && pointPos[i].z == -1.0) {\n        finalColor = vec4(color, 0.2);\n      } else {\n        float dis = distance(vPosition, pointPos[i]);\n        if(dis < ring) {\n          float a = 1.0 - dis / ring * 0.6;\n          gl_FragColor = vec4(color, a);\n          return;\n        } else {\n          finalColor = vec4(color, 0.2);\n        }\n      }\n    }\n    gl_FragColor = finalColor;\n  }\n",B=function(){var n=new y["Db"](25,36,36,0,2*Math.PI,0,Math.PI/180*90),e=t("b032"),o=(new y["Jb"]).load(e),r=new y["xb"]({vertexShader:R,fragmentShader:q,uniforms:{sphereTexture:{value:o},pointPos:{type:"fv",value:new Array(9).fill(-1)},ring:{value:3}},transparent:!0,side:y["u"]});return v=new y["X"](n,r),v.position.set(0,0,0),v.layers.enable(0),v},G=function(n){X(n);for(var e=[],t=[],o=[],r=0;r<3;r++){var a=L();e.push(a.end.x),e.push(a.end.y),e.push(a.end.z);var i=[a.start,a.end];t.push(i),o.push(new y["p"](0,1,1))}d=new j["a"](void 0,void 0,void 0,.8),d.setParticles(t,o);for(var s=0;s<d.particles.length;s++)n.add(d.particles[s]);d.moveAction({time:0},{time:1},1200),J(e)},J=function(n){v.material.uniforms.pointPos.value=n},L=function(){var n=new y["Pb"](Math.floor(101*Math.random())+-50+30,Math.floor(51*Math.random())+0+50,Math.floor(101*Math.random())+-50+30),e=new y["Pb"](Math.floor(21*Math.random())+-10,Math.floor(11*Math.random())+0,Math.floor(21*Math.random())+-10),t=e.sub(n).normalize(),o=new y["tb"](n,t),r=new y["Pb"];return o.intersectSphere(new y["Cb"](new y["Pb"](0,0,0),25),r),{start:n,end:r}},X=function(n){v.material.uniforms.pointPos.value=new Array(9).fill(-1),d&&d.destroy(n)},V=function(n){f=setInterval((function(){G(n)}),3e3)},E=function(n){f&&clearInterval(f),d&&d.destroy(n),n.remove(v),v.geometry.dispose(),v.material.dispose()},N=function(n){b=new M["a"](n),b.camera.position.set(-10,100,120),b.setCameraPosition(),m=new y["b"](4210752),m.layers.enable(x["a"]),m.layers.enable(0),b.scene.add(m),h=new y["D"](16777215,526368,1),h.position.set(0,0,10),h.layers.enable(x["a"]),h.layers.enable(0),b.scene.add(h),g=Object(x["b"])(b.scene,b.camera,b.renderer),p=new y["X"],b.scene.add(p),Q(p),K(p)},H=function n(){Object(x["c"])(b.scene,b.camera,b.renderer,g),b.orbitControl.update(),w=requestAnimationFrame(n)},K=function(n){var e=F();n.add(e),z(e)},Q=function(n){var e=B();n.add(e),V(e)},W=function(){cancelAnimationFrame(w),m.dispose(),h.dispose(),T(p),E(p),b.destroy()},Y=t("35f3"),Z=Object(o["k"])({setup:function(n){var e=Object(o["n"])("setCurrentSceneState"),t=Object(o["B"])();return Object(o["t"])(Object(P["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:Y["a"].rotateBtn.isChecked=!0,N(t.value),H(),e(b),b.startRotate(),Y["a"].rotateBtn.isChecked=!0;case 6:case"end":return n.stop()}}),n)})))),Object(o["r"])((function(){W()})),function(n,e){return Object(o["v"])(),Object(o["f"])("div",{class:"gongfang-container",ref_key:"gongfangContainer",ref:t},null,512)}}}),$=(t("fc89"),t("6b0d")),nn=t.n($);const en=nn()(Z,[["__scopeId","data-v-6449d9e2"]]);var tn=en,on={name:"gongfang",components:{GongfangPage:tn},setup:function(){var n=Object(o["n"])("setToolbarState");n({routeControl:!0,rotateControl:!0,initControl:!0})}};t("a3b7");const rn=nn()(on,[["render",a]]);e["default"]=rn},fc89:function(n,e,t){"use strict";t("0bf6")}}]);
//# sourceMappingURL=chunk-bcff7d84.88c53362.js.map